<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Modules Practice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        h1, h2 {
            color: #333;
        }
        
        .exercise {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .exercise h3 {
            margin-top: 0;
            color: #2196F3;
        }
        
        .button-group {
            margin: 10px 0;
        }
        
        button {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        button:hover {
            background-color: #1976D2;
        }
        
        .result {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        
        .error {
            color: #d32f2f;
            background-color: #ffebee;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .success {
            color: #388e3c;
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2196F3;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>JavaScript Modules Practice</h1>
        <p>This page demonstrates various module concepts and patterns. Use the buttons below to test different module functionalities.</p>
        
        <div class="exercise">
            <h3>Exercise 1: Basic Module Exports</h3>
            <div class="button-group">
                <button onclick="testMathOperations()">Test Math Operations</button>
            </div>
            <div id="mathResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 2: Calculator Class</h3>
            <div class="button-group">
                <button onclick="testCalculator()">Test Calculator</button>
            </div>
            <div id="calculatorResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 3: User Utils</h3>
            <div class="button-group">
                <button onclick="testUserUtils()">Test User Utils</button>
            </div>
            <div id="userUtilsResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 4: Process User Data</h3>
            <div class="button-group">
                <button onclick="testProcessUserData()">Test Process User Data</button>
            </div>
            <div id="processDataResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 5: Dynamic Imports</h3>
            <div class="button-group">
                <button onclick="testDynamicImport()">Test Dynamic Import</button>
            </div>
            <div id="dynamicImportResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 8: State Manager</h3>
            <div class="button-group">
                <button onclick="testStateManager()">Test State Manager</button>
            </div>
            <div id="stateManagerResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 9: Database Module</h3>
            <div class="button-group">
                <button onclick="testDatabaseModule()">Test Database Module</button>
            </div>
            <div id="databaseResult" class="result"></div>
        </div>
        
        <div class="exercise">
            <h3>Exercise 10: Module Patterns</h3>
            <div class="button-group">
                <button onclick="testLogger()">Test Logger</button>
                <button onclick="testModuleCalculator()">Test Calculator</button>
                <button onclick="testUserFactory()">Test User Factory</button>
            </div>
            <div id="patternsResult" class="result"></div>
        </div>
    </div>

    <script type="module">
        import Calculator, {
            PI,
            E,
            square,
            cube,
            userUtils,
            processUserData,
            loadModule,
            stateManager,
            databaseModule,
            modulePatterns
        } from './exercises.js';

        // Exercise 1: Math Operations
        window.testMathOperations = () => {
            const result = document.getElementById('mathResult');
            try {
                result.textContent = `
PI: ${PI}
E: ${E}
square(4): ${square(4)}
cube(3): ${cube(3)}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 2: Calculator
        window.testCalculator = () => {
            const result = document.getElementById('calculatorResult');
            try {
                const calc = new Calculator();
                result.textContent = `
add(5, 3): ${calc.add(5, 3)}
subtract(10, 4): ${calc.subtract(10, 4)}
multiply(6, 7): ${calc.multiply(6, 7)}
divide(15, 3): ${calc.divide(15, 3)}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 3: User Utils
        window.testUserUtils = () => {
            const result = document.getElementById('userUtilsResult');
            try {
                result.textContent = `
validateEmail('test@example.com'): ${userUtils.validateEmail('test@example.com')}
validateEmail('invalid-email'): ${userUtils.validateEmail('invalid-email')}
formatName('john', 'doe'): ${userUtils.formatName('john', 'doe')}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 4: Process User Data
        window.testProcessUserData = async () => {
            const result = document.getElementById('processDataResult');
            try {
                const userData = {
                    firstName: 'John',
                    lastName: 'Doe',
                    date: new Date()
                };
                const processed = await processUserData(userData);
                result.textContent = JSON.stringify(processed, null, 2);
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 5: Dynamic Import
        window.testDynamicImport = async () => {
            const result = document.getElementById('dynamicImportResult');
            try {
                result.textContent = 'Loading module...';
                const module = await loadModule('testModule');
                result.textContent = 'Module loaded successfully!';
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 8: State Manager
        window.testStateManager = () => {
            const result = document.getElementById('stateManagerResult');
            try {
                stateManager.setState({ count: 0 });
                result.textContent = `Initial state: ${JSON.stringify(stateManager.getState())}`;
                
                stateManager.setState({ count: 1, message: 'Updated' });
                result.textContent += `\nUpdated state: ${JSON.stringify(stateManager.getState())}`;
                
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 9: Database Module
        window.testDatabaseModule = async () => {
            const result = document.getElementById('databaseResult');
            try {
                result.textContent = 'Initializing database...';
                await databaseModule.initialize({ url: 'test://db' });
                
                result.textContent += '\nExecuting query...';
                const queryResult = await databaseModule.query('SELECT * FROM users');
                
                result.textContent += '\nCleaning up...';
                await databaseModule.cleanup();
                
                result.textContent += '\nAll operations completed successfully!';
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        // Exercise 10: Module Patterns
        window.testLogger = () => {
            const result = document.getElementById('patternsResult');
            try {
                const logger = modulePatterns.logger.getInstance();
                logger.log('Test log message');
                logger.error('Test error message');
                result.textContent = `Logger logs: ${JSON.stringify(logger.getLogs(), null, 2)}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        window.testModuleCalculator = () => {
            const result = document.getElementById('patternsResult');
            try {
                const calc = modulePatterns.calculator;
                calc.add(5, 3);
                calc.multiply(4, 2);
                result.textContent = `Calculator history: ${JSON.stringify(calc.getHistory(), null, 2)}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };

        window.testUserFactory = () => {
            const result = document.getElementById('patternsResult');
            try {
                const admin = modulePatterns.userFactory.createUser('admin', { name: 'Admin User' });
                const user = modulePatterns.userFactory.createUser('user', { name: 'Regular User' });
                result.textContent = `Created users:\nAdmin: ${JSON.stringify(admin, null, 2)}\nUser: ${JSON.stringify(user, null, 2)}`;
                result.className = 'result success';
            } catch (error) {
                result.textContent = `Error: ${error.message}`;
                result.className = 'result error';
            }
        };
    </script>
</body>
</html> 